<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="card_styles.css">
  <meta charset="UTF-8">
  <title></title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
    }
    .left-half {
      width: 50%;
      background: url('Pages/welcome_to_board.jpg') no-repeat center center;
      background-size: cover;
      border: 2px solid black;
      box-sizing: border-box;
    }
    .right-half {
      width: 50%;
      display: flex;
      flex-direction: column;
      border: 2px solid black;
      box-sizing: border-box;
    }
    .third {
      flex: 1;
      background-color: #ffffff;
      border-bottom: 1px solid #ccc;
      display: flex;
      border-top: 1px solid black;
      box-sizing: border-box;
    }
    .third:first-child {
      border-top: none;
    }
    .tools-section {
      width: 25%;
      background-color: #f0f0f0;
      border-right: 1px solid #ccc;
      border-left: 1px solid black;
      box-sizing: border-box;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .tools-section button {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      cursor: pointer;
      background-color: white;
      border: 1px solid #aaa;
      transition: background-color 0.3s;
    }
    .tools-section button.active {
      background-color: #cce5ff;
      border-color: #007bff;
    }
    .game-board-section {
      flex: 1;
      background-color: #ffffff;
      border-left: 1px solid black;
      box-sizing: border-box;
      padding: 10px;
      position: relative;
      overflow: hidden;
    }
    .tool-icon {
      width: 20px;
      height: 20px;
      vertical-align: middle;
      margin-right: 5px;
    }
    .game-element {
      position: absolute;
      user-select: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="left-half" id="gameBoard"></div>
  <div class="right-half">
    <div class="third" style="background-color: #ffffff;">Cards
        <div id="card-container" class="card-container"></div>
        <button id="next-button">Next</button>
        <button id="shuffle-button">Shuffle Cards</button>
    </div>
    <div class="third">
      <div class="tools-section">
        <button id="textTool">Add Text</button>
        <button id="crossOffTool">Cross Off</button>
        <button id="circleTool">Add Circle</button>
        <button id="verticalLineTool">Add Vertical Line</button>
        <button id="horizontalLineTool">Add Horizontal Line</button>
        <button id="deleteTool">Delete Element</button>
      </div>
      <div class="game-board-section">
        <p></p>
      </div>
    </div>
  </div>

  <script>
    let activeTool = null;
    const toolButtons = [
      document.getElementById('textTool'),
      document.getElementById('crossOffTool'),
      document.getElementById('circleTool'),
      document.getElementById('verticalLineTool'),
      document.getElementById('horizontalLineTool'),
      document.getElementById('deleteTool')
    ];

    toolButtons.forEach(button => {
      button.addEventListener('click', () => {
        if (activeTool === button.id) {
          button.classList.remove('active');
          activeTool = null;
        } else {
          toolButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          activeTool = button.id;
        }
        console.log("Current active tool:", activeTool);
      });
    });

    const gameBoard = document.getElementById('gameBoard');

    gameBoard.addEventListener('click', function (e) {
      const rect = gameBoard.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      if (!activeTool) return;

      if (activeTool === 'textTool') {
        const text = prompt("Enter text:");
        if (text) {
          const div = document.createElement('div');
          div.className = 'game-element';
          div.style.left = `${x}px`;
          div.style.top = `${y}px`;
          div.style.fontSize = '20px';
          div.style.fontWeight = 'bold';
          div.textContent = text;
          gameBoard.appendChild(div);
        }
      } else if (activeTool === 'crossOffTool') {
        const img = document.createElement('img');
        img.src = 'Pages/square.png';
        img.className = 'game-element';
        img.style.width = '20px';
        img.style.height = '20px';
        img.style.left = `${x - 20}px`;
        img.style.top = `${y - 20}px`;
        gameBoard.appendChild(img);
      } else if (activeTool === 'circleTool') {
        const width = 50;
        const height = 40; 
        const oval = document.createElement('div');
        oval.className = 'game-element';
        oval.style.width = `${width}px`;
        oval.style.height = `${height}px`;
        oval.style.borderRadius = '50%';
        oval.style.background = 'rgba(0,0,255,0.3)';
        oval.style.left = `${x - width/2}px`;
        oval.style.top = `${y - height/2}px`;
        gameBoard.appendChild(oval);
      } else if (activeTool === 'verticalLineTool') {
        const height = 80;
        const line = document.createElement('div');
        line.className = 'game-element';
        line.style.width = `7px`;
        line.style.height = `${height}px`;
        line.style.background = 'black';
        line.style.left = `${x}px`;
        line.style.top = `${y}px`;
        gameBoard.appendChild(line);
      } else if (activeTool === 'horizontalLineTool') {
        const width = 60
        if (width) {
          const line = document.createElement('div');
          line.className = 'game-element';
          line.style.height = `7px`;
          line.style.width = `${parseInt(width)}px`;
          line.style.background = 'black';
          line.style.left = `${x}px`;
          line.style.top = `${y}px`;
          gameBoard.appendChild(line);
        }
      } else if (activeTool === 'deleteTool') {
        if (e.target.classList.contains('game-element')) {
          e.target.remove();
        }
      }
    });

    
    gameBoard.addEventListener('mousedown', function (e) {
      if (activeTool === 'deleteTool' && e.target.classList.contains('game-element')) {
        e.target.remove();
      }
    });

  </script>
  <script src="card_script.js">

window.addEventListener('DOMContentLoaded', () => {
  document.getElementById('shuffle-button').addEventListener('click', () => {
    allPlayableCards = [...allPlayableCards, ...discardPile];
    discardPile = [];
    shuffleAndDisplayCards();
  });

  document.getElementById('next-button').addEventListener('click', () => {
    if (!selectedCard) {
      alert("Please select a card before continuing.");
      return;
    }

    shuffleAndDisplayCards();
  });


  shuffleAndDisplayCards();
});

  </script>
</body>
</html>